<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Rock Paper Scissors</title>
    <style>
        input {
        font-size: 2em;
        margin: 10px 1px 0;
        }
    </style>
    <link rel="stylesheet" href="style.css">

</head>
<body>
    <div class="keys">
        <div data-key="82" class="key">
            <kbd>R</kbd>
            <span class="sound">rock</span>
        </div>
        <div data-key="80" class="key">
            <kbd>P</kbd>
            <span class="sound">paper</span>
        </div>
        <div data-key="83" class="key">
            <kbd>S</kbd>
            <span class="sound">scissors</span>
        </div>
    </div>

    <div class="counters">
        <div id="results" class="results"></div>
        <div id="pcount">Welcome to Rock, Paper, Scissors. Press "R", "P", or "S" key to play.</div>
        <div id="ccount"></div>
        <div id="tcount"></div>
    </div>


    

<script>
    
function getRandomInt(max) {
    return Math.floor(Math.random() * Math.floor(max));
}

function computerPlay() {
    var result = getRandomInt(3);
    if (result == 1) {
        return("ROCK");
    } else if (result == 2) {
        return("PAPER");
    } else {
        return("SCISSORS");
    }
}

var playerCount = 0;
var computerCount = 0;
var tieCount = 0;

function playRound(e) {

    var computerSelection = computerPlay();
    const results = document.querySelector('#results');
    const pcount = document.querySelector('#pcount');
    const ccount = document.querySelector('#ccount');
    const tcount = document.querySelector('#tcount');

    if (computerCount >= 5 || playerCount >= 5) {
        return;
    }

    if (e.key == "r") {
        var playerSelection = 'ROCK';
    } else if (e.key == "p") {
        var playerSelection = 'PAPER';
    } else if (e.key == "s") {
        var playerSelection = 'SCISSORS'
    };

    if (playerSelection == 'ROCK' && computerSelection == 'SCISSORS') {
        results.textContent = 'You win! Rock beats Scissors.';
    } else if (playerSelection == 'ROCK' && computerSelection == 'PAPER') {
        results.textContent = 'You lose! Paper beats rock.';
    } else if (playerSelection == 'ROCK' && computerSelection == 'ROCK') {
        results.textContent = 'It\'s a tie! Rock on rock.';
    } else if (playerSelection == 'PAPER' && computerSelection == 'ROCK') {
        results.textContent = 'You win! Paper beats rock.';
    } else if (playerSelection == 'PAPER' && computerSelection == 'SCISSORS') {
        results.textContent = 'You lose! Scissors beats paper.';
    } else if (playerSelection == 'PAPER' && computerSelection == 'PAPER') {
        results.textContent = 'It\'s a tie! Paper on Paper.';
    } else if (playerSelection == 'SCISSORS' && computerSelection == 'PAPER') {
        results.textContent = 'You win! Scissors beats paper.';
    } else if (playerSelection == 'SCISSORS' && computerSelection == 'ROCK') {
        results.textContent = 'You lose! Rock beats scissors.';
    } else if (playerSelection == 'SCISSORS' && computerSelection == 'SCISSORS') {
        results.textContent = 'It\'s a tie! Scissors on Scissors.';
    }

    if (results.textContent.substring(0, 7) == "You win") {
            playerCount += 1
        } else if (results.textContent.substring(0,8) == "You lose") {
            computerCount += 1
        } else {
            tieCount += 1
    }

    pcount.textContent = 'Player Count: ' + playerCount;
    ccount.textContent = 'Computer Count: ' + computerCount;
    tcount.textContent = 'Ties: ' + tieCount;

    if (playerCount == 5) {
        results.textContent = "GAME OVER. YOU WIN! Refresh the page to play again."
    } else if (computerCount == 5) {
        results.textContent = "GAME OVER. COMPUTER WINS. Refresh the page to play again."
    }


};

window.addEventListener('keydown', playRound);


</script>
</body>
</html>